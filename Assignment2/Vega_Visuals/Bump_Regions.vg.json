{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "config": {
    "view": {"stroke": "transparent"},
    "legend": {"labelFontSize": 11, "titleFontSize": 12},
    "axis": {"labelFontSize": 11, "titleFontSize": 12}
  },
  "vconcat": [
    {
      "title": "State Tourism Growth Over The Years",
      "width": 400,
      "height": 250,
      "params": [
        {
          "name": "state_highlight",
          "select": {"type": "point", "fields": ["State"]},
          "bind": "legend",
          "value": [{"State": "Victoria"}]
        }
      ],
      "data": {
        "url": "https://raw.githubusercontent.com/AthanV/Vis2/refs/heads/main/Assignment2/DataSets/BumpChart.csv",
        "format": {"type": "csv", "parse": {"Growth": "number", "Year": "number"}}
      },
      "transform": [
        {
          "window": [{"op": "rank", "as": "rank"}],
          "sort": [{"field": "Growth", "order": "descending"}],
          "groupby": ["Year"]
        }
      ],
      "mark": {"type": "line", "point": true},
      "encoding": {
        "x": {
          "field": "Year",
          "type": "ordinal",
          "axis": {"labelAngle": 0, "title": "Year"}
        },
        "y": {
          "field": "rank",
          "type": "quantitative",
          "axis": {"title": "Rank"},
          "sort": "ascending",
          "scale": {"reverse": true, "domain": [1, 7]}
        },
        "color": {
          "field": "State",
          "type": "nominal",
          "title": "State",
          "scale": {"range": ["#4477AA", "#EE6677", "#228833", "#CCBB44", "#66CCEE", "#AA3377", "#BBBBBB"]},
          "legend": {
            "orient": "right",
            "padding": 5,
            "offset": 5,
            "labelLimit": 100
          }
        },
        "opacity": {
          "condition": {"param": "state_highlight", "value": 1},
          "value": 0.15
        },
        "tooltip": [
          {"field": "State", "type": "nominal"},
          {"field": "Year", "type": "ordinal"},
          {"field": "Growth", "type": "quantitative", "format": ".2f", "title": "Growth(%)"},
          {"field": "rank", "type": "quantitative"}
        ]
      }
    },
    {
      "title": "Top 5 Regions by State",
      "width": 400,
      "height": {"step": 28},
  
      "data": {
        "url": "https://raw.githubusercontent.com/AthanV/Vis2/refs/heads/main/Assignment2/DataSets/TopRegions.csv",
        "format": {"type": "csv", "parse": {"Trips": "number"}}
      },
      "transform": [
        {"filter": {"param": "state_highlight"}},
        {
          "window": [{"op": "rank", "as": "rank"}],
          "sort": [{"field": "Trips", "order": "descending"}],
          "groupby": ["State"]
        },
        {"filter": "datum.rank <= 5"}
      ],
      "mark": {"type": "bar"},
      "encoding": {
        "y": {
          "field": "Region",
          "type": "ordinal",
          "title": null,
          "sort": "-x",
          "axis": {
            "labelLimit": 500,
            "labelAlign": "right"
          }
        },
        "x": {
          "field": "Trips",
          "type": "quantitative",
          "title": "Number of Trips",
          "axis": {"tickCount": 6}
        },
        "color": {
          "field": "State",
          "type": "nominal",
          "legend": null
        },
        "tooltip": [
          {"field": "State", "type": "nominal"},
          {"field": "Region", "type": "nominal"},
          {"field": "Trips", "type": "quantitative", "format": ",.0f"}
        ]
      }
    }
  ],
   "autosize": {"type": "fit", "contains": "padding"},
   "padding": {"left": 70, "top": 20, "bottom": 20}
}
