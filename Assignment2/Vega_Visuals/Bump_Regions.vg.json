{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "vconcat": [
    {
      "params": [
        {
          "name": "state_highlight",
          "select": {"type": "point", "fields": ["State"]},
          "bind": "legend",
          "value": [{"State": "Victoria"}]
        }
      ],
      "title": "State Tourism Growth Over The Years",
      "width": "container",
      "height": 300,
      "description": "Bump chart showing ranking of states by population growth over time",
      "data": {
        "url": "https://raw.githubusercontent.com/AthanV/Vis2/refs/heads/main/Assignment2/DataSets/BumpChart.csv",
        "format": {"type": "csv", "parse": {"Growth": "number", "Year": "number"}}
      },
      "transform": [
        {
          "window": [{"op": "rank", "as": "rank"}],
          "sort": [{"field": "Growth", "order": "descending"}],
          "groupby": ["Year"]
        }
      ],
      "mark": {
        "type": "line",
        "point": true
      },
      "encoding": {
        "x": {
          "field": "Year",
          "type": "ordinal",
          "title": null,
          "axis": {"labelAngle": 0}
        },
        "y": {
          "field": "rank",
          "type": "quantitative",
          "title": null,
          "axis": {"labelAngle": 0},
          "sort": "ascending",
          "scale": {"reverse": true, "domain": [1, 7]}
        },
        "color": {
          "field": "State",
          "type": "nominal",
          "title": "State",
          "legend" : {
            "orient": "right",
            "padding": 10,
            "offset": 10
          }
        },
        "opacity": {
          "condition": {"param": "state_highlight", "value": 1},
          "value": 0.2
        },
        "tooltip": [
          {"field": "State", "type": "nominal"},
          {"field": "Year", "type": "ordinal"},
          {"field": "Growth", "type": "quantitative", "format": ".2f"},
          {"field": "rank", "type": "quantitative"}
        ]
      }
    },
    {
      "title": "Top 5 Regions by State",
      "width": "450",
      "data": {
        "url": "https://raw.githubusercontent.com/AthanV/Vis2/refs/heads/main/Assignment2/DataSets/TopRegions.csv",
        "format": {"type": "csv", "parse": {"Trips": "number"}}
      },
      "transform": [
        {
          "filter": {"param": "state_highlight"}
        },
        {
          "window": [{"op": "rank", "as": "rank"}],
          "sort": [{"field": "Trips", "order": "descending"}],
          "groupby": ["State"]
        },
        {
          "filter": "datum.rank <= 5"
        }
      ],
      "mark": "bar",
      "encoding": {
        "y": {
          "field": "Region",
          "type": "ordinal",
          "title": null,
          "sort": "-x",
          "axis": {"labelLimit": 500}
        },
        "x": {
          "field": "Trips",
          "type": "quantitative",
          "title": "Number of Trips",
          "axis": {"tickCount": 10}
        },
        "tooltip": [
          {"field": "State", "type": "nominal"},
          {"field": "Region", "type": "nominal"},
          {"field": "Trips", "type": "quantitative", "title": "Trips", "format": ".0f"}
        ]
      },
      "height": {"step": 30}
    }
  ]
}
